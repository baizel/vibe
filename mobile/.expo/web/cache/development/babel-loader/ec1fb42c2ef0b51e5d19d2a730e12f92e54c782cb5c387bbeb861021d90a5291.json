{"ast":null,"code":"import axios from \"axios\";\nimport * as SecureStore from \"expo-secure-store\";\nconst BASE_URL = __DEV__ ? \"http://localhost:8080/api\" : \"https://your-domain.com/api\";\nconst apiClient = axios.create({\n  baseURL: BASE_URL,\n  timeout: 10000\n});\napiClient.interceptors.request.use(async config => {\n  const token = await SecureStore.getItemAsync(\"token\");\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\napiClient.interceptors.response.use(response => response, error => {\n  if (error.response?.status === 401) {\n    SecureStore.deleteItemAsync(\"token\");\n  }\n  return Promise.reject(error);\n});\nexport const authAPI = {\n  login: (email, password) => apiClient.post(\"/auth/login\", {\n    email,\n    password\n  }).then(res => res.data),\n  register: userData => apiClient.post(\"/auth/register\", userData).then(res => res.data),\n  refreshToken: () => apiClient.post(\"/auth/refresh\").then(res => res.data)\n};\nexport const productAPI = {\n  getProducts: () => apiClient.get(\"/products\").then(res => res.data),\n  getProduct: id => apiClient.get(`/products/${id}`).then(res => res.data),\n  getCategories: () => apiClient.get(\"/products/categories\").then(res => res.data),\n  searchProducts: query => apiClient.get(`/products/search?q=${query}`).then(res => res.data)\n};\nexport const orderAPI = {\n  createOrder: orderData => apiClient.post(\"/orders\", orderData).then(res => res.data),\n  getOrders: () => apiClient.get(\"/orders\").then(res => res.data),\n  getOrder: id => apiClient.get(`/orders/${id}`).then(res => res.data),\n  trackOrder: id => apiClient.get(`/orders/${id}/track`).then(res => res.data),\n  cancelOrder: id => apiClient.put(`/orders/${id}/cancel`).then(res => res.data)\n};\nexport const driverAPI = {\n  getRoutes: date => apiClient.get(`/driver/routes/${date}`).then(res => res.data),\n  startRoute: routeId => apiClient.put(`/driver/routes/${routeId}/start`).then(res => res.data),\n  updateOrderStatus: (orderId, status) => apiClient.put(`/driver/orders/${orderId}/status`, {\n    status\n  }).then(res => res.data),\n  updateLocation: (latitude, longitude) => apiClient.post(\"/driver/location\", {\n    latitude,\n    longitude\n  }).then(res => res.data)\n};\nexport default apiClient;","map":{"version":3,"names":["axios","SecureStore","BASE_URL","__DEV__","apiClient","create","baseURL","timeout","interceptors","request","use","config","token","getItemAsync","headers","Authorization","response","error","status","deleteItemAsync","Promise","reject","authAPI","login","email","password","post","then","res","data","register","userData","refreshToken","productAPI","getProducts","get","getProduct","id","getCategories","searchProducts","query","orderAPI","createOrder","orderData","getOrders","getOrder","trackOrder","cancelOrder","put","driverAPI","getRoutes","date","startRoute","routeId","updateOrderStatus","orderId","updateLocation","latitude","longitude"],"sources":["/Users/baizel/project/fresh-trio/mobile/src/services/api.ts"],"sourcesContent":["// src/services/api.ts - API Service Layer\nimport axios from \"axios\";\nimport * as SecureStore from \"expo-secure-store\";\n\nconst BASE_URL = __DEV__\n  ? \"http://localhost:8080/api\"\n  : \"https://your-domain.com/api\";\n\nconst apiClient = axios.create({\n  baseURL: BASE_URL,\n  timeout: 10000,\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(async (config) => {\n  const token = await SecureStore.getItemAsync(\"token\");\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // Handle unauthorized - redirect to login\n      SecureStore.deleteItemAsync(\"token\");\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  login: (email: string, password: string) =>\n    apiClient.post(\"/auth/login\", { email, password }).then((res) => res.data),\n\n  register: (userData: any) =>\n    apiClient.post(\"/auth/register\", userData).then((res) => res.data),\n\n  refreshToken: () => apiClient.post(\"/auth/refresh\").then((res) => res.data),\n};\n\nexport const productAPI = {\n  getProducts: () => apiClient.get(\"/products\").then((res) => res.data),\n\n  getProduct: (id: string) =>\n    apiClient.get(`/products/${id}`).then((res) => res.data),\n\n  getCategories: () =>\n    apiClient.get(\"/products/categories\").then((res) => res.data),\n\n  searchProducts: (query: string) =>\n    apiClient.get(`/products/search?q=${query}`).then((res) => res.data),\n};\n\nexport const orderAPI = {\n  createOrder: (orderData: any) =>\n    apiClient.post(\"/orders\", orderData).then((res) => res.data),\n\n  getOrders: () => apiClient.get(\"/orders\").then((res) => res.data),\n\n  getOrder: (id: string) =>\n    apiClient.get(`/orders/${id}`).then((res) => res.data),\n\n  trackOrder: (id: string) =>\n    apiClient.get(`/orders/${id}/track`).then((res) => res.data),\n\n  cancelOrder: (id: string) =>\n    apiClient.put(`/orders/${id}/cancel`).then((res) => res.data),\n};\n\nexport const driverAPI = {\n  getRoutes: (date: string) =>\n    apiClient.get(`/driver/routes/${date}`).then((res) => res.data),\n\n  startRoute: (routeId: string) =>\n    apiClient.put(`/driver/routes/${routeId}/start`).then((res) => res.data),\n\n  updateOrderStatus: (orderId: string, status: string) =>\n    apiClient\n      .put(`/driver/orders/${orderId}/status`, { status })\n      .then((res) => res.data),\n\n  updateLocation: (latitude: number, longitude: number) =>\n    apiClient\n      .post(\"/driver/location\", { latitude, longitude })\n      .then((res) => res.data),\n};\n\nexport default apiClient;\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}
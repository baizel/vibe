{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from \"axios\";\nimport * as SecureStore from \"expo-secure-store\";\nvar BASE_URL = __DEV__ ? \"http://localhost:8080/api\" : \"https://your-domain.com/api\";\nvar apiClient = axios.create({\n  baseURL: BASE_URL,\n  timeout: 10000\n});\napiClient.interceptors.request.use(function () {\n  var _ref = _asyncToGenerator(function* (config) {\n    var token = yield SecureStore.getItemAsync(\"token\");\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  });\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}());\napiClient.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  var _error$response;\n  if (((_error$response = error.response) == null ? void 0 : _error$response.status) === 401) {\n    SecureStore.deleteItemAsync(\"token\");\n  }\n  return Promise.reject(error);\n});\nexport var authAPI = {\n  login: function login(email, password) {\n    return apiClient.post(\"/auth/login\", {\n      email: email,\n      password: password\n    }).then(function (res) {\n      return res.data;\n    });\n  },\n  register: function register(userData) {\n    return apiClient.post(\"/auth/register\", userData).then(function (res) {\n      return res.data;\n    });\n  },\n  refreshToken: function refreshToken() {\n    return apiClient.post(\"/auth/refresh\").then(function (res) {\n      return res.data;\n    });\n  }\n};\nexport var productAPI = {\n  getProducts: function getProducts() {\n    return apiClient.get(\"/products\").then(function (res) {\n      return res.data;\n    });\n  },\n  getProduct: function getProduct(id) {\n    return apiClient.get(`/products/${id}`).then(function (res) {\n      return res.data;\n    });\n  },\n  getCategories: function getCategories() {\n    return apiClient.get(\"/products/categories\").then(function (res) {\n      return res.data;\n    });\n  },\n  searchProducts: function searchProducts(query) {\n    return apiClient.get(`/products/search?q=${query}`).then(function (res) {\n      return res.data;\n    });\n  }\n};\nexport var orderAPI = {\n  createOrder: function createOrder(orderData) {\n    return apiClient.post(\"/orders\", orderData).then(function (res) {\n      return res.data;\n    });\n  },\n  getOrders: function getOrders() {\n    return apiClient.get(\"/orders\").then(function (res) {\n      return res.data;\n    });\n  },\n  getOrder: function getOrder(id) {\n    return apiClient.get(`/orders/${id}`).then(function (res) {\n      return res.data;\n    });\n  },\n  trackOrder: function trackOrder(id) {\n    return apiClient.get(`/orders/${id}/track`).then(function (res) {\n      return res.data;\n    });\n  },\n  cancelOrder: function cancelOrder(id) {\n    return apiClient.put(`/orders/${id}/cancel`).then(function (res) {\n      return res.data;\n    });\n  }\n};\nexport var driverAPI = {\n  getRoutes: function getRoutes(date) {\n    return apiClient.get(`/driver/routes/${date}`).then(function (res) {\n      return res.data;\n    });\n  },\n  startRoute: function startRoute(routeId) {\n    return apiClient.put(`/driver/routes/${routeId}/start`).then(function (res) {\n      return res.data;\n    });\n  },\n  updateOrderStatus: function updateOrderStatus(orderId, status) {\n    return apiClient.put(`/driver/orders/${orderId}/status`, {\n      status: status\n    }).then(function (res) {\n      return res.data;\n    });\n  },\n  updateLocation: function updateLocation(latitude, longitude) {\n    return apiClient.post(\"/driver/location\", {\n      latitude: latitude,\n      longitude: longitude\n    }).then(function (res) {\n      return res.data;\n    });\n  }\n};\nexport default apiClient;","map":{"version":3,"names":["axios","SecureStore","BASE_URL","__DEV__","apiClient","create","baseURL","timeout","interceptors","request","use","_ref","_asyncToGenerator","config","token","getItemAsync","headers","Authorization","_x","apply","arguments","response","error","_error$response","status","deleteItemAsync","Promise","reject","authAPI","login","email","password","post","then","res","data","register","userData","refreshToken","productAPI","getProducts","get","getProduct","id","getCategories","searchProducts","query","orderAPI","createOrder","orderData","getOrders","getOrder","trackOrder","cancelOrder","put","driverAPI","getRoutes","date","startRoute","routeId","updateOrderStatus","orderId","updateLocation","latitude","longitude"],"sources":["/Users/baizel/project/fresh-trio/mobile/src/services/api.ts"],"sourcesContent":["// src/services/api.ts - API Service Layer\nimport axios from \"axios\";\nimport * as SecureStore from \"expo-secure-store\";\n\nconst BASE_URL = __DEV__\n  ? \"http://localhost:8080/api\"\n  : \"https://your-domain.com/api\";\n\nconst apiClient = axios.create({\n  baseURL: BASE_URL,\n  timeout: 10000,\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(async (config) => {\n  const token = await SecureStore.getItemAsync(\"token\");\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // Handle unauthorized - redirect to login\n      SecureStore.deleteItemAsync(\"token\");\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  login: (email: string, password: string) =>\n    apiClient.post(\"/auth/login\", { email, password }).then((res) => res.data),\n\n  register: (userData: any) =>\n    apiClient.post(\"/auth/register\", userData).then((res) => res.data),\n\n  refreshToken: () => apiClient.post(\"/auth/refresh\").then((res) => res.data),\n};\n\nexport const productAPI = {\n  getProducts: () => apiClient.get(\"/products\").then((res) => res.data),\n\n  getProduct: (id: string) =>\n    apiClient.get(`/products/${id}`).then((res) => res.data),\n\n  getCategories: () =>\n    apiClient.get(\"/products/categories\").then((res) => res.data),\n\n  searchProducts: (query: string) =>\n    apiClient.get(`/products/search?q=${query}`).then((res) => res.data),\n};\n\nexport const orderAPI = {\n  createOrder: (orderData: any) =>\n    apiClient.post(\"/orders\", orderData).then((res) => res.data),\n\n  getOrders: () => apiClient.get(\"/orders\").then((res) => res.data),\n\n  getOrder: (id: string) =>\n    apiClient.get(`/orders/${id}`).then((res) => res.data),\n\n  trackOrder: (id: string) =>\n    apiClient.get(`/orders/${id}/track`).then((res) => res.data),\n\n  cancelOrder: (id: string) =>\n    apiClient.put(`/orders/${id}/cancel`).then((res) => res.data),\n};\n\nexport const driverAPI = {\n  getRoutes: (date: string) =>\n    apiClient.get(`/driver/routes/${date}`).then((res) => res.data),\n\n  startRoute: (routeId: string) =>\n    apiClient.put(`/driver/routes/${routeId}/start`).then((res) => res.data),\n\n  updateOrderStatus: (orderId: string, status: string) =>\n    apiClient\n      .put(`/driver/orders/${orderId}/status`, { status })\n      .then((res) => res.data),\n\n  updateLocation: (latitude: number, longitude: number) =>\n    apiClient\n      .post(\"/driver/location\", { latitude, longitude })\n      .then((res) => res.data),\n};\n\nexport default apiClient;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}